var Modal=function(){function t(t){this.buttons=document.querySelectorAll("[data-toggle=modal]"),this.cancels=document.querySelectorAll("[data-dismiss=modal]"),this.conf=t,this.options={close:function(){var t=a();u(t)},animation:function(){i(),r()},shadowClose:function(){o()}}}function n(){var t,n=f.length;for(t=n-1;t>=0;t--)f[t]._status="close"}function e(t,n){for(var e in t)n&&e in n&&!n[e]||t[e]()}function o(){h().onclick=function(t){if(t.target===this){var n=this,e=n.querySelector(".modal-content"),o=n.parentElement;l(o,n,e)}}}function i(){var t,n=f.length;for(t=n-1;t>=0;t--)f[t].classList.add("openAnimation")}function r(){l=function(t){return function(n,e,o){var i=arguments,r=e.onclick||null,c=function(o){t.apply(this,i),document.body.removeEventListener("animationend",c),n.classList.remove("closeAnimation"),e.onclick=r};e.onclick=null,document.body.addEventListener("animationend",c),n.classList.add("closeAnimation")}}(l)}function c(t,n,e){return"open"===t._status?console.log(t.id+"已经打开"):(t.removeChild(e),n.appendChild(e),t.appendChild(n),t.classList.add("modal-show"),void(t._status="open"))}function l(t,n,e){return"close"===t._status?console.log(t.id+"已经关闭"):(n.removeChild(e),t.removeChild(n),t.appendChild(e),t.classList.remove("modal-show"),void(t._status="close"))}function a(){var t,n,e=document.createElement("link"),o=document.querySelectorAll(".modal-header");for(e.rel="stylesheet",e.href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css",document.head.appendChild(e),t=o.length-1;t>=0;t--)n=document.createElement("i"),n.classList.add("fa","fa-times","modal-header-cross"),o[t].appendChild(n);return document.querySelectorAll(".modal-header-cross")}function s(t){for(var n=t.length-1;n>=0;n--)t[n].onclick=function(){var t=this.getAttribute("data-target"),n=document.querySelector("#"+t),e=h(),o=n.querySelector(".modal-content");c(n,e,o),e.offsetHeight<o.offsetHeight-40?e.classList.add("block"):e.classList.remove("block"),this.blur(),o.focus()}}function d(t){return t&&t.classList.contains("modal-wrap")?t:d(t.parentElement)}function u(t){for(var n=t.length-1;n>=0;n--)t[n].onclick=function(){var t=d(this),n=t.querySelector(".modal-shadow"),e=n.querySelector(".modal-content");l(t,n,e)}}function m(){var t,n=document.querySelectorAll(".modal-content");for(t=n.length-1;t>=0;t--)n[t].setAttribute("tabIndex","1"),n[t].onkeydown=function(t){var n=this,e=this.parentElement,o=d(this),i=t.charCode||t.keyCode;27===i&&l(o,e,n)}}var f=document.querySelectorAll(".modal-wrap");t.prototype.init=function(){var t=0;return function(){var o=this,i=function(){var i=o.buttons,r=o.cancels,c=o.conf,l=o.options;e(l,c),m(),u(r),s(i),n(),t++},r=function(){console.log("init函数只能执行一次，不然会出错")};return 0===t?i():r()}}(),t.prototype.open=function(t){var n,e=h(),o=document.getElementById(t),i=o.querySelector(".modal-content"),r=f.length;for(n=r-1;n>=0;n--)if("open"===f[n]._status)return console.log("同时只能打开一个模态框");c(o,e,i)},t.prototype.dismiss=function(){var t,n=h(),e=f.length;for(t=e-1;t>=0;t--)if("open"===f[t]._status)return l(f[t],n,f[t].querySelector(".modal-content"));return console.log("没有打开的模态框")};var h=function(){var t=null,n=function(){return t=document.createElement("div"),t.classList.add("modal-shadow"),e(),t},e=function(){var n;window.onresize=function(){clearTimeout(n),n=setTimeout(function(){t.style.height=window.innerHeight+"px",t.style.width=window.innerWidth+"px"},20)}};return function(){return t=t||n(),t.style.height=window.innerHeight+"px",t.style.width=window.innerWidth+"px",t}}();return t}();